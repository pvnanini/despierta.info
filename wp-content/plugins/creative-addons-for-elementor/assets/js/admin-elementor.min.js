jQuery(document).ready(function(e){e("body").on("click",".elementor-control-crel_kbCategories_redirect_to_category a",function(){let t=e(this).data("url_template");void 0===t&&(t=e(this).prop("href"),e(this).data("url_template",t));let n=1;try{n=elementor.getPanelView().getCurrentPageView().getOption("editedElementView").container.settings.attributes.crel_kb_id}catch(e){}t=t.replace(/crel_kb_id/gi,n),e(this).prop("href",t)}),tinymce.on("AddEditor",function(t){setTimeout(function(){if(!e(t.editor.container).closest(".elementor-control-crel_advancedLists__list_text").length)return void setTimeout(function(){if(!e(t.editor.container).closest(".elementor-control-crel_advancedLists__list_text").length)return;let n=t.editor.theme.panel.controlIdLookup;for(let e in n)"alignleft"!=n[e].settings.icon&&"alignright"!=n[e].settings.icon&&"aligncenter"!=n[e].settings.icon&&"numlist"!=n[e].settings.icon&&"blockquote"!=n[e].settings.icon||n[e].$el.hide()},1e3);let n=t.editor.theme.panel.controlIdLookup;for(let e in n)"alignleft"!=n[e].settings.icon&&"alignright"!=n[e].settings.icon&&"aligncenter"!=n[e].settings.icon&&"numlist"!=n[e].settings.icon&&"blockquote"!=n[e].settings.icon||n[e].$el.hide()},100)}),e("body").on("submit",".crel-search-box__search-form",!1),e("#elementor-preview-iframe").load(function(){e("#elementor-preview-iframe").contents().on("click",function(t){let n=e(t.target);if(0==n.closest(".crel-steps-container").length)return!0;let i=n.closest(".crel-step");if(0==i.length)return!0;let o=0;n.closest(".crel-steps-container").find(".crel-step").each(function(){if(e(this).prop("id")==i.prop("id"))return!1;o++}),e("#elementor-mode-switcher-preview-input").prop("checked")&&e("#elementor-mode-switcher-inner label").trigger("click"),e(".elementor-tab-control-content a").trigger("click"),e(".elementor-control-crel_steps__steps_section_content").hasClass("elementor-open")||e(".elementor-control-crel_steps__steps_section_content").trigger("click"),setTimeout(function(){let n=e("#elementor-controls").find(".elementor-repeater-fields-wrapper").find(".elementor-repeater-fields").eq(o);n.length&&0==n.find(".editable").length&&(n.find(".elementor-repeater-row-item-title").trigger("click"),e("#elementor-panel-content-wrapper").scrollTop(50*o+150)),n.length&&void 0!==t.originalEvent.path[0]&&n.find(".elementor-control-title_tab").length&&(e(t.originalEvent.path[0]).hasClass("crel-step-header__title__text")&&n.find(".elementor-control-title_tab").trigger("click"),e(t.originalEvent.path[0]).hasClass("elementor-text-editor")&&n.find(".elementor-control-text_tab").trigger("click"),"img"==t.originalEvent.path[0].tagName.toLowerCase()&&n.find(".elementor-control-image_tab").trigger("click"))},100)})}),elementor.channels.editor.on("imagesManager:detailsReceived",function(){0!=e(".elementor-control-crel_steps__list").length&&e(".elementor-control-crel_steps__list [data-setting=image_size]").trigger("change")});elementor.hooks.addFilter("element/view",function(t,n){return"widget"===n.get("elType")&&"crel-image-guide"===n.get("widgetType")?t.extend(function(t){return{initialize:function(){t.prototype.initialize.apply(this,arguments),this.listenTo(elementor.channels.dataEditMode,"switch",this.toggleSpotDragMode),this.listenTo(this.model.get("editSettings"),"change:activeItemIndex",this.onEditSettingsChange)},onRender:function(){t.prototype.onRender.call(this),this.toggleSpotDragMode()},onDestroy:function(){this.deactivateSpotDragMode(),t.prototype.onDestroy.call(this)},activateSpotDragMode:function(){this.ui.spotHandle.draggable({addClasses:!1})},deactivateSpotDragMode:function(){this.ui.spotHandle.draggable("instance")&&this.ui.spotHandle.draggable("destroy")},toggleSpotDragMode:function(){let e="edit"===elementor.channels.dataEditMode.request("activeMode");this.deactivateSpotDragMode(),e&&elementor.userCan("design")&&this.activateSpotDragMode()},ui:function(){let e=t.__super__.ui.call(this);return e.spotHandle="> .elementor-widget-container .crel-image-guide__spot",e.listItemHandle="> .elementor-widget-container .crel-image-guide__list-item",e.imageHandle="> .elementor-widget-container .crel-image-guide__image-spots",e},onEditSettingsChange:function(e){this.$el.find('[data-index="'+(e.get("activeItemIndex")-1)+'"]').addClass("crel-image-guide__spot--active").siblings(".crel-image-guide__spot--active").removeClass("crel-image-guide__spot--active")},events:function(){let e=t.__super__.events.call(this);return e["click @ui.spotHandle"]="onClickSpot",e["dragstart @ui.spotHandle"]="openSelectedSpot",e["dragstop @ui.spotHandle"]="onDragSpotHandle",e["click @ui.listItemHandle"]="onClickListItem",e["click @ui.imageHandle"]="onClickImage",e},onMouseDown:function(t){e("#elementor-mode-switcher-preview-input").prop("checked")&&e("#elementor-mode-switcher-inner label").trigger("click"),this.model.trigger("request:edit")},onClickSpot:function(e){e.preventDefault(),this.openSelectedSpot(e)},openSelectedSpot:function(t){t.stopPropagation(),e("#elementor-mode-switcher-preview-input").prop("checked")&&e("#elementor-mode-switcher-inner label").trigger("click"),this.model.trigger("request:edit");let n=this.getSpotByIndex(t.currentTarget.getAttribute("data-index"));if(!n)return;let i=n.ui.itemTitle;i.parent().next().hasClass("editable")||i.trigger("click"),void 0!==t.originalEvent.path&&void 0!==t.originalEvent.path[0]&&e(t.originalEvent.path[0]).hasClass("crel-image-guide__list-text")?i.parent().next().find(".elementor-control-spots_tabs .elementor-control-text_tab").trigger("click"):i.parent().next().find(".elementor-control-spots_tabs .elementor-control-icon_tab .elementor-panel-tab-heading").trigger("click"),setTimeout(function(){e("#elementor-panel-content-wrapper").animate({scrollTop:e(".elementor-control-crel_image_guide__spots").position().top-e("#elementor-panel-page-editor").position().top+i.closest(".elementor-repeater-fields").position().top},200)},100)},getSpotByIndex:function(e){let t=this.getSpotsView();return void 0!==t&&t.children.findByIndex(e)},getControlViewByName:function(e){return elementor.getPanelView().getCurrentPageView().children.find(function(t){return t.model.get("name")===e})},getSpotsView:function(){let t=this.model.get("editSettings").get("panel");return"content"!==t.activeTab&&e(".elementor-tab-control-content").trigger("click"),"crel_image_guide_spots_section"!==t.activeSection&&this.getControlViewByName("crel_image_guide_spots_section").ui.heading.trigger("click"),this.getControlViewByName("crel_image_guide__spots")},onDragSpotHandle:function(t,n){t.stopPropagation();let i="desktop"===elementorFrontend.getCurrentDeviceMode()?"":"_"+elementorFrontend.getCurrentDeviceMode(),o=n.helper,r=this.getEditModel().getSetting("crel_image_guide__spots").at(o.data("index")),l={},a=elementorFrontend.config.is_rtl?o.offsetParent().width()-n.position.left-o.outerWidth(!0):n.position.left,c=n.position.top,s=r.get("crel_image_guide__spot_X"+i).unit,g=r.get("crel_image_guide__spot_Y"+i).unit;a=(100*a/o.offsetParent().width()).toFixed(2),c=(100*c/o.offsetParent().height()).toFixed(2),l["crel_image_guide__spot_X"+i]={size:a,unit:s},l["crel_image_guide__spot_Y"+i]={size:c,unit:g},r.setExternalChange(l),this.renderStyles();let d=setTimeout(function(){o.css({top:"",left:"",right:"",bottom:"",width:"",height:""}),clearTimeout(d)},250);e("#elementor-panel-saver-button-publish, #elementor-panel-saver-button-save-options").removeClass("elementor-disabled")},onClickListItem:function(e){e.preventDefault(),this.openSelectedSpot(e)},onClickImage:function(t){t.preventDefault(),t.stopPropagation(),e("#elementor-mode-switcher-preview-input").prop("checked")&&e("#elementor-mode-switcher-inner label").trigger("click"),this.model.trigger("request:edit");let n=this.model.get("editSettings").get("panel");"content"!==n.activeTab&&e(".elementor-tab-control-content").trigger("click"),"crel_image_guide_image_section"!==n.activeSection&&this.getControlViewByName("crel_image_guide_image_section").ui.heading.trigger("click"),setTimeout(function(){e("#elementor-panel-content-wrapper").animate({scrollTop:e(".elementor-control-crel_image_guide_image_section").position().top-e("#elementor-panel-page-editor").position().top},200)},100)}}}(t)):t});elementor.hooks.addFilter("element/view",function(t,n){return"widget"===n.get("elType")&&"crel-text-image"===n.get("widgetType")?t.extend(function(t){return{initialize:function(){t.prototype.initialize.apply(this,arguments)},onEditSettingsChange:function(e){},getControlViewByName:function(e){return elementor.getPanelView().getCurrentPageView().children.find(function(t){return t.model.get("name")===e})},ui:function(){let e=t.__super__.ui.call(this);return e.imgHandle="> .elementor-widget-container .crel-text-image-img",e.textHandle="> .elementor-widget-container .crel-text-image-body",e},events:function(){let e=t.__super__.events.call(this);return e["click @ui.imgHandle"]="onClickImage",e["click @ui.textHandle"]="onClickText",e},onClickImage:function(t){t.preventDefault(),t.stopPropagation(),e("#elementor-mode-switcher-preview-input").prop("checked")&&e("#elementor-mode-switcher-inner label").trigger("click"),this.model.trigger("request:edit"),"content"!==this.model.get("editSettings").get("panel").activeTab&&e(".elementor-tab-control-content").trigger("click"),e(".elementor-control-crel_text_image__section_image").hasClass("elementor-open")||e(".elementor-control-crel_text_image__section_image").trigger("click"),setTimeout(function(){e("#elementor-panel-content-wrapper").animate({scrollTop:e(".elementor-control-crel_text_image__section_image").position().top-e("#elementor-panel-page-editor").position().top},200)},100)},onClickText:function(t){t.preventDefault(),t.stopPropagation(),e("#elementor-mode-switcher-preview-input").prop("checked")&&e("#elementor-mode-switcher-inner label").trigger("click"),this.model.trigger("request:edit"),"content"!==this.model.get("editSettings").get("panel").activeTab&&e(".elementor-tab-control-content").trigger("click"),e(".elementor-control-crel_text_image__section_description").hasClass("elementor-open")||e(".elementor-control-crel_text_image__section_description").trigger("click"),setTimeout(function(){e("#elementor-panel-content-wrapper").animate({scrollTop:e(".elementor-control-crel_text_image__section_description").position().top-e("#elementor-panel-page-editor").position().top},200)},100)}}}(t)):t}),elementor.channels.editor.on("change",function(t){void 0!==t.$el&&((t.$el.hasClass("elementor-control-crel_text_image__layout_type")||t.$el.hasClass("elementor-control-crel_text_image__layout_type_desktop")||t.$el.hasClass("elementor-control-crel_text_image__layout_type_tablet")||t.$el.hasClass("elementor-control-crel_text_image__layout_type_mobile"))&&e('[data-setting="crel_text_image__layout_type_trigger"]').trigger("change"),(t.$el.hasClass("elementor-control-crel_image_guide__layout_type")||t.$el.hasClass("elementor-control-crel_image_guide__layout_type_desktop")||t.$el.hasClass("elementor-control-crel_image_guide__layout_type_tablet")||t.$el.hasClass("elementor-control-crel_image_guide__layout_type_mobile"))&&e('[data-setting="crel_image_guide__layout_type_trigger"]').trigger("change"))});elementor.hooks.addFilter("element/view",function(t,n){return"widget"===n.get("elType")&&"crel-code-block"===n.get("widgetType")?t.extend(function(t){return{initialize:function(){t.prototype.initialize.apply(this,arguments)},onEditSettingsChange:function(e){},getControlViewByName:function(e){return elementor.getPanelView().getCurrentPageView().children.find(function(t){return t.model.get("name")===e})},ui:function(){let e=t.__super__.ui.call(this);return e.preHandle="> .elementor-widget-container pre",e},events:function(){let e=t.__super__.events.call(this);return e["click @ui.preHandle"]="onClickPre",e},onClickPre:function(t){t.preventDefault(),t.stopPropagation(),e("#elementor-mode-switcher-preview-input").prop("checked")&&e("#elementor-mode-switcher-inner label").trigger("click"),this.model.trigger("request:edit"),"content"!==this.model.get("editSettings").get("panel").activeTab&&e(".elementor-tab-control-content").trigger("click"),e(".elementor-control-crel_code_block__general_section_controls").hasClass("elementor-open")||e(".elementor-control-crel_code_block__general_section_controls").trigger("click"),setTimeout(function(){e("#elementor-panel-content-wrapper").animate({scrollTop:e(".elementor-control-crel_code_block__general_section_controls").position().top-e("#elementor-panel-page-editor").position().top},200)},100)}}}(t)):t});elementor.hooks.addFilter("element/view",function(t,n){return"widget"===n.get("elType")&&"crel-advanced-heading"===n.get("widgetType")?t.extend(function(t){return{updateId:!0,initialize:function(){if(t.prototype.initialize.apply(this,arguments),this.model.attributes.settings.attributes.crel_advancedHeading__linkId)this.updateId=!1;else{let e=this;elementor.channels.editor.on("change",function(t){t.$el.find("input").length&&("crel_advancedHeading__linkId"==t.$el.find("input").data("setting")?t.$el.find("input").val()?e.updateId=!1:e.updateId=!0:e.onTouchHeading())})}},getControlViewByName:function(e){return elementor.getPanelView().getCurrentPageView().children.find(function(t){return t.model.get("name")===e})},ui:function(){let e=t.__super__.ui.call(this);return e.Heading=".crel-advanced-heading__title__text",e},events:function(){let e=t.__super__.events.call(this);return e["click @ui.Heading"]="onTouchHeading",e["keyup @ui.Heading"]="onTouchHeading",e},onTouchHeading:function(t){if(void 0!==t&&(e("#elementor-mode-switcher-preview-input").prop("checked")&&e("#elementor-mode-switcher-inner label").trigger("click"),this.model.trigger("request:edit"),"content"!==this.model.get("editSettings").get("panel").activeTab&&e(".elementor-tab-control-content").trigger("click"),e(".elementor-control-crel_advancedHeading__titleText__section_content").hasClass("elementor-open")||e(".elementor-control-crel_advancedHeading__titleText__section_content").trigger("click"),setTimeout(function(){e("#elementor-panel-content-wrapper").animate({scrollTop:e(".elementor-control-crel_advancedHeading__title_text").position().top-e("#elementor-panel-page-editor").position().top},200)},100)),!this.updateId)return;let n=e("[data-setting=crel_advancedHeading__title_text]"),i=n.length?n.val():"";i=this.createSlug(i),elementor.getPanelView().getCurrentPageView().model.setSetting("crel_advancedHeading__linkId",i)},createSlug:function(e){let t=(e=(e=(e=e.replace(crel_elementor.regexp,"")).replace("$","-")).replace(/\s/g,"-")).length;for(;t&&~e.search(/^(-|\d)/);)e=e.replace(/^(-|\d)/,""),t--;return 0==e.length&&(e="crel-"+Math.floor(999*Math.random())),e}}}(t)):t})});