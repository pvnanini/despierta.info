jQuery(document).ready(function(e){function t(e){e.css({position:"relative"}),e.append('\n\t\t\t<div class="crel-packman">\n\t\t\t\t<div class="crel-packman--background"></div>\n\t\t\t\t<div class="crel-packman--image"></div>\n\t\t\t</div>\n\t\t')}function a(){e(".crel-packman").remove()}e(".crel-dashboard__tabs").length>0&&e(".crel-dashboard-tabs__nav__item").on("click",function(t){t.preventDefault();let a=e(this).attr("id");e(".crel-dashboard-tabs__nav__item").removeClass("crel-dashboard-tabs__nav__item--active"),e(".crel-dashboard-tabs__content__panel").removeClass("crel-dashboard-tabs__content__panel--active"),e(this).addClass("crel-dashboard-tabs__nav__item--active"),e("#"+a+"-content").addClass("crel-dashboard-tabs__content__panel--active")}),e("#crel-nav-widgets-content .crel-dashboard__save-settings").on("click",function(){let s={action:"crel-save-widgets",crel_settings_nonce:e("#crel_settings_nonce").val(),inactive_widgets:[]};e(".crel-dashboard-tabs__content__panel__body__widgets .crel-dashboard-widget-container input[type=checkbox]:not(:checked)").each(function(){s.inactive_widgets.push(e(this).prop("name"))}),e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:s,beforeSend:function(a){t(e(".crel-dashboard__tabs__content")),e("#crel-nav-widgets-content .crel-dashboard__save-settings").text(crel_vars.saving_config),e("#crel-nav-widgets-content .crel-dashboard__save-settings").prop("disabled","disabled"),e("#crel-nav-widgets-content .crel-dashboard__saving-error").text("")}}).done(function(t){"error"==t.status?e("#crel-nav-widgets-content .crel-dashboard__saving-error").text(t.message):(e("#crel-nav-widgets-content .crel-dashboard__save-settings").text(crel_vars.saved_config),setTimeout(function(){e("#crel-nav-widgets-content .crel-dashboard__save-settings").text(crel_vars.save_config)},1e3)),e("#crel-nav-widgets-content .crel-dashboard__save-settings").prop("disabled",!1)}).always(function(){a(e(".crel-dashboard__tabs__content"))})}),e("#crel-nav-settings-content .crel-dashboard__save-settings").on("click",function(){let s={action:"crel-switch-to-globals",crel_settings_nonce:e("#crel_settings_nonce").val(),switch_to_globals:e("#switch_to_globals:checked").length};e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:s,beforeSend:function(a){t(e(".crel-dashboard__tabs__content")),e("#crel-nav-settings-content .crel-dashboard__save-settings").text(crel_vars.saving_config),e("#crel-nav-settings-content .crel-dashboard__save-settings").prop("disabled","disabled"),e("#crel-nav-settings-content .crel-dashboard__saving-error").text("")}}).done(function(t){"error"==t.status?e("#crel-nav-settings-content .crel-dashboard__saving-error").text(t.message):(e("#crel-nav-settings-content .crel-dashboard__save-settings").text(crel_vars.saved_config),setTimeout(function(){e("#crel-nav-settings-content .crel-dashboard__save-settings").text(crel_vars.save_config)},1e3)),e("#crel-nav-settings-content .crel-dashboard__save-settings").prop("disabled",!1)}).always(function(){a(e(".crel-dashboard__tabs__content"))})}),e("#crel-nav-debug-content #crel_toggle_debug").on("click",function(){var a={action:"crel_toggle_debug",_wpnonce_crel_toggle_debug:e("#_wpnonce_crel_toggle_debug").val()};e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:a,beforeSend:function(a){t(e(".crel-dashboard__tabs__content"))}}).done(function(e){window.location.href=window.location.href+"&tab=debug"}).always(function(){})}),e(".crel-dashboard-presets__header .crel-dashboard-widget-container").on("click",function(){e(".crel-dashboard-presets__header .crel-dashboard-widget-container").removeClass("crel-dashboard-widget-container--active"),e(this).addClass("crel-dashboard-widget-container--active"),e(".crel-dashboard-presets__widget-preview").removeClass("crel-dashboard-presets__widget-preview--active"),e("."+e(this).data("name")).addClass("crel-dashboard-presets__widget-preview--active"),e(".crel-dashboard-presets__preset-previews").removeClass("crel-dashboard-presets__widget-preview--active")}),e("#crel-nav-presets-content .crel-dashboard__save-settings").on("click",function(){!function(){let s={action:"crel-save-presets",crel_settings_nonce:e("#crel_settings_nonce").val(),inactive_presets:{}};e(".crel-dashboard-presets__widgets-preview__wrap input[type=checkbox]:not(:checked)").each(function(){void 0===s.inactive_presets[e(this).data("widget")]&&(s.inactive_presets[e(this).data("widget")]=[]),s.inactive_presets[e(this).data("widget")].push(e(this).data("preset"))}),e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:s,beforeSend:function(a){t(e(".crel-dashboard__tabs__content")),e("#crel-nav-presets-content .crel-dashboard__save-settings").text(crel_vars.saving_config),e("#crel-nav-presets-content .crel-dashboard__save-settings").prop("disabled","disabled"),e("#crel-nav-presets-content .crel-dashboard__saving-error").text("")}}).done(function(t){"error"==t.status?e("#crel-nav-presets-content .crel-dashboard__saving-error").text(t.message):(e("#crel-nav-presets-content .crel-dashboard__save-settings").text(crel_vars.saved_config),setTimeout(function(){e("#crel-nav-presets-content .crel-dashboard__save-settings").text(crel_vars.save_config)},1e3)),e(".crel-dashboard__save-settings").prop("disabled",!1)}).always(function(){a(e(".crel-dashboard__tabs__content"))})}()}),e(".crel_img_zoom").on("click",function(t){t.preventDefault(),t.stopPropagation(),e("#crel-admin-page-wrap").find(".image_zoom").remove();var a,s=e(this).find("img");a=s.length>1?e(s[0]).is(":visible")?e(s[0]).attr("src"):e(s[1]).is(":visible")?e(s[1]).attr("src"):e(s[2]).attr("src"):e(this).find("img").attr("src"),e(this).after('<div id="crel_image_zoom" class="image_zoom"><img src="'+a+'" class="image_zoom"><span class="close icon_close"></span></div>'),e("html, body").on("click",function(){e("#crel_image_zoom").remove(),e("html, body").off("click")})}),function(){var t=e(".crel-dashboard");t.find(".featured_img").on("click",function(a){a.preventDefault(),a.stopPropagation(),t.find(".image_zoom").remove();var s,n=e(this).find("img");s=n.length>1?e(n[0]).is(":visible")?e(n[0]).attr("src"):e(n[1]).is(":visible")?e(n[1]).attr("src"):e(n[2]).attr("src"):e(this).find("img").attr("src"),e(this).after('<div id="crel_image_zoom" class="image_zoom"><img src="'+s+'" class="image_zoom"><span class="close icon_close"></span></div>'),e("html, body").on("click.crel",function(){e("#crel_image_zoom").remove(),e("html, body").off("click.crel")})})}()});